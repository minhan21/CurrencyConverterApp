54f63630a9cd4f7ef7ce33d9c0ce048a
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _ListMetricsAggregator = _interopRequireDefault(require("./ListMetricsAggregator"));
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var Info = (0, _createClass2.default)(function Info() {
  (0, _classCallCheck2.default)(this, Info);
  this.any_blank_count = 0;
  this.any_blank_ms = 0;
  this.any_blank_speed_sum = 0;
  this.mostly_blank_count = 0;
  this.mostly_blank_ms = 0;
  this.pixels_blank = 0;
  this.pixels_sampled = 0;
  this.pixels_scrolled = 0;
  this.total_time_spent = 0;
  this.sample_count = 0;
});
var DEBUG = false;
var _listeners = [];
var _minSampleCount = 10;
var _sampleRate = DEBUG ? 1 : null;
var FillRateHelper = function () {
  function FillRateHelper(listMetrics) {
    (0, _classCallCheck2.default)(this, FillRateHelper);
    this._anyBlankStartTime = null;
    this._enabled = false;
    this._info = new Info();
    this._mostlyBlankStartTime = null;
    this._samplesStartTime = null;
    this._listMetrics = listMetrics;
    this._enabled = (_sampleRate || 0) > Math.random();
    this._resetData();
  }
  return (0, _createClass2.default)(FillRateHelper, [{
    key: "activate",
    value: function activate() {
      if (this._enabled && this._samplesStartTime == null) {
        DEBUG && console.debug('FillRateHelper: activate');
        this._samplesStartTime = global.performance.now();
      }
    }
  }, {
    key: "deactivateAndFlush",
    value: function deactivateAndFlush() {
      if (!this._enabled) {
        return;
      }
      var start = this._samplesStartTime;
      if (start == null) {
        DEBUG && console.debug('FillRateHelper: bail on deactivate with no start time');
        return;
      }
      if (this._info.sample_count < _minSampleCount) {
        this._resetData();
        return;
      }
      var total_time_spent = global.performance.now() - start;
      var info = _objectSpread(_objectSpread({}, this._info), {}, {
        total_time_spent: total_time_spent
      });
      if (DEBUG) {
        var derived = {
          avg_blankness: this._info.pixels_blank / this._info.pixels_sampled,
          avg_speed: this._info.pixels_scrolled / (total_time_spent / 1000),
          avg_speed_when_any_blank: this._info.any_blank_speed_sum / this._info.any_blank_count,
          any_blank_per_min: this._info.any_blank_count / (total_time_spent / 1000 / 60),
          any_blank_time_frac: this._info.any_blank_ms / total_time_spent,
          mostly_blank_per_min: this._info.mostly_blank_count / (total_time_spent / 1000 / 60),
          mostly_blank_time_frac: this._info.mostly_blank_ms / total_time_spent
        };
        for (var key in derived) {
          derived[key] = Math.round(1000 * derived[key]) / 1000;
        }
        console.debug('FillRateHelper deactivateAndFlush: ', {
          derived: derived,
          info: info
        });
      }
      _listeners.forEach(function (listener) {
        return listener(info);
      });
      this._resetData();
    }
  }, {
    key: "computeBlankness",
    value: function computeBlankness(props, cellsAroundViewport, scrollMetrics) {
      if (!this._enabled || props.getItemCount(props.data) === 0 || cellsAroundViewport.last < cellsAroundViewport.first || this._samplesStartTime == null) {
        return 0;
      }
      var dOffset = scrollMetrics.dOffset,
        offset = scrollMetrics.offset,
        velocity = scrollMetrics.velocity,
        visibleLength = scrollMetrics.visibleLength;
      this._info.sample_count++;
      this._info.pixels_sampled += Math.round(visibleLength);
      this._info.pixels_scrolled += Math.round(Math.abs(dOffset));
      var scrollSpeed = Math.round(Math.abs(velocity) * 1000);
      var now = global.performance.now();
      if (this._anyBlankStartTime != null) {
        this._info.any_blank_ms += now - this._anyBlankStartTime;
      }
      this._anyBlankStartTime = null;
      if (this._mostlyBlankStartTime != null) {
        this._info.mostly_blank_ms += now - this._mostlyBlankStartTime;
      }
      this._mostlyBlankStartTime = null;
      var blankTop = 0;
      var first = cellsAroundViewport.first;
      var firstFrame = this._listMetrics.getCellMetrics(first, props);
      while (first <= cellsAroundViewport.last && (!firstFrame || !firstFrame.isMounted)) {
        firstFrame = this._listMetrics.getCellMetrics(first, props);
        first++;
      }
      if (firstFrame && first > 0) {
        blankTop = Math.min(visibleLength, Math.max(0, firstFrame.offset - offset));
      }
      var blankBottom = 0;
      var last = cellsAroundViewport.last;
      var lastFrame = this._listMetrics.getCellMetrics(last, props);
      while (last >= cellsAroundViewport.first && (!lastFrame || !lastFrame.isMounted)) {
        lastFrame = this._listMetrics.getCellMetrics(last, props);
        last--;
      }
      if (lastFrame && last < props.getItemCount(props.data) - 1) {
        var bottomEdge = lastFrame.offset + lastFrame.length;
        blankBottom = Math.min(visibleLength, Math.max(0, offset + visibleLength - bottomEdge));
      }
      var pixels_blank = Math.round(blankTop + blankBottom);
      var blankness = pixels_blank / visibleLength;
      if (blankness > 0) {
        this._anyBlankStartTime = now;
        this._info.any_blank_speed_sum += scrollSpeed;
        this._info.any_blank_count++;
        this._info.pixels_blank += pixels_blank;
        if (blankness > 0.5) {
          this._mostlyBlankStartTime = now;
          this._info.mostly_blank_count++;
        }
      } else if (scrollSpeed < 0.01 || Math.abs(dOffset) < 1) {
        this.deactivateAndFlush();
      }
      return blankness;
    }
  }, {
    key: "enabled",
    value: function enabled() {
      return this._enabled;
    }
  }, {
    key: "_resetData",
    value: function _resetData() {
      this._anyBlankStartTime = null;
      this._info = new Info();
      this._mostlyBlankStartTime = null;
      this._samplesStartTime = null;
    }
  }], [{
    key: "addListener",
    value: function addListener(callback) {
      if (_sampleRate === null) {
        console.warn('Call `FillRateHelper.setSampleRate` before `addListener`.');
      }
      _listeners.push(callback);
      return {
        remove: function remove() {
          _listeners = _listeners.filter(function (listener) {
            return callback !== listener;
          });
        }
      };
    }
  }, {
    key: "setSampleRate",
    value: function setSampleRate(sampleRate) {
      _sampleRate = sampleRate;
    }
  }, {
    key: "setMinSampleCount",
    value: function setMinSampleCount(minSampleCount) {
      _minSampleCount = minSampleCount;
    }
  }]);
}();
module.exports = FillRateHelper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJfY3JlYXRlQ2xhc3MyIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9MaXN0TWV0cmljc0FnZ3JlZ2F0b3IiLCJvd25LZXlzIiwiZSIsInIiLCJ0IiwiT2JqZWN0Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJkZWZhdWx0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsIkluZm8iLCJhbnlfYmxhbmtfY291bnQiLCJhbnlfYmxhbmtfbXMiLCJhbnlfYmxhbmtfc3BlZWRfc3VtIiwibW9zdGx5X2JsYW5rX2NvdW50IiwibW9zdGx5X2JsYW5rX21zIiwicGl4ZWxzX2JsYW5rIiwicGl4ZWxzX3NhbXBsZWQiLCJwaXhlbHNfc2Nyb2xsZWQiLCJ0b3RhbF90aW1lX3NwZW50Iiwic2FtcGxlX2NvdW50IiwiREVCVUciLCJfbGlzdGVuZXJzIiwiX21pblNhbXBsZUNvdW50IiwiX3NhbXBsZVJhdGUiLCJGaWxsUmF0ZUhlbHBlciIsImxpc3RNZXRyaWNzIiwiX2FueUJsYW5rU3RhcnRUaW1lIiwiX2VuYWJsZWQiLCJfaW5mbyIsIl9tb3N0bHlCbGFua1N0YXJ0VGltZSIsIl9zYW1wbGVzU3RhcnRUaW1lIiwiX2xpc3RNZXRyaWNzIiwiTWF0aCIsInJhbmRvbSIsIl9yZXNldERhdGEiLCJrZXkiLCJ2YWx1ZSIsImFjdGl2YXRlIiwiY29uc29sZSIsImRlYnVnIiwiZ2xvYmFsIiwicGVyZm9ybWFuY2UiLCJub3ciLCJkZWFjdGl2YXRlQW5kRmx1c2giLCJzdGFydCIsImluZm8iLCJkZXJpdmVkIiwiYXZnX2JsYW5rbmVzcyIsImF2Z19zcGVlZCIsImF2Z19zcGVlZF93aGVuX2FueV9ibGFuayIsImFueV9ibGFua19wZXJfbWluIiwiYW55X2JsYW5rX3RpbWVfZnJhYyIsIm1vc3RseV9ibGFua19wZXJfbWluIiwibW9zdGx5X2JsYW5rX3RpbWVfZnJhYyIsInJvdW5kIiwibGlzdGVuZXIiLCJjb21wdXRlQmxhbmtuZXNzIiwicHJvcHMiLCJjZWxsc0Fyb3VuZFZpZXdwb3J0Iiwic2Nyb2xsTWV0cmljcyIsImdldEl0ZW1Db3VudCIsImRhdGEiLCJsYXN0IiwiZmlyc3QiLCJkT2Zmc2V0Iiwib2Zmc2V0IiwidmVsb2NpdHkiLCJ2aXNpYmxlTGVuZ3RoIiwiYWJzIiwic2Nyb2xsU3BlZWQiLCJibGFua1RvcCIsImZpcnN0RnJhbWUiLCJnZXRDZWxsTWV0cmljcyIsImlzTW91bnRlZCIsIm1pbiIsIm1heCIsImJsYW5rQm90dG9tIiwibGFzdEZyYW1lIiwiYm90dG9tRWRnZSIsImJsYW5rbmVzcyIsImVuYWJsZWQiLCJhZGRMaXN0ZW5lciIsImNhbGxiYWNrIiwid2FybiIsInJlbW92ZSIsInNldFNhbXBsZVJhdGUiLCJzYW1wbGVSYXRlIiwic2V0TWluU2FtcGxlQ291bnQiLCJtaW5TYW1wbGVDb3VudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJGaWxsUmF0ZUhlbHBlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtDZWxsTWV0cmljUHJvcHN9IGZyb20gJy4vTGlzdE1ldHJpY3NBZ2dyZWdhdG9yJztcblxuaW1wb3J0IExpc3RNZXRyaWNzQWdncmVnYXRvciBmcm9tICcuL0xpc3RNZXRyaWNzQWdncmVnYXRvcic7XG5cbmV4cG9ydCB0eXBlIEZpbGxSYXRlSW5mbyA9IEluZm87XG5cbmNsYXNzIEluZm8ge1xuICBhbnlfYmxhbmtfY291bnQ6IG51bWJlciA9IDA7XG4gIGFueV9ibGFua19tczogbnVtYmVyID0gMDtcbiAgYW55X2JsYW5rX3NwZWVkX3N1bTogbnVtYmVyID0gMDtcbiAgbW9zdGx5X2JsYW5rX2NvdW50OiBudW1iZXIgPSAwO1xuICBtb3N0bHlfYmxhbmtfbXM6IG51bWJlciA9IDA7XG4gIHBpeGVsc19ibGFuazogbnVtYmVyID0gMDtcbiAgcGl4ZWxzX3NhbXBsZWQ6IG51bWJlciA9IDA7XG4gIHBpeGVsc19zY3JvbGxlZDogbnVtYmVyID0gMDtcbiAgdG90YWxfdGltZV9zcGVudDogbnVtYmVyID0gMDtcbiAgc2FtcGxlX2NvdW50OiBudW1iZXIgPSAwO1xufVxuXG5jb25zdCBERUJVRyA9IGZhbHNlO1xuXG5sZXQgX2xpc3RlbmVyczogQXJyYXk8KEluZm8pID0+IHZvaWQ+ID0gW107XG5sZXQgX21pblNhbXBsZUNvdW50ID0gMTA7XG5sZXQgX3NhbXBsZVJhdGUgPSBERUJVRyA/IDEgOiBudWxsO1xuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIGZvciBkZXRlY3Rpbmcgd2hlbiB0aGUgbWF4aW1lbSBmaWxsIHJhdGUgb2YgYFZpcnR1YWxpemVkTGlzdGAgaXMgZXhjZWVkZWQuXG4gKiBCeSBkZWZhdWx0IHRoZSBzYW1wbGluZyByYXRlIGlzIHNldCB0byB6ZXJvIGFuZCB0aGlzIHdpbGwgZG8gbm90aGluZy4gSWYgeW91IHdhbnQgdG8gY29sbGVjdFxuICogc2FtcGxlcyAoZS5nLiB0byBsb2cgdGhlbSksIG1ha2Ugc3VyZSB0byBjYWxsIGBGaWxsUmF0ZUhlbHBlci5zZXRTYW1wbGVSYXRlKDAuMC0xLjApYC5cbiAqXG4gKiBMaXN0ZW5lcnMgYW5kIHNhbXBsZSByYXRlIGFyZSBnbG9iYWwgZm9yIGFsbCBgVmlydHVhbGl6ZWRMaXN0YHMgLSB0eXBpY2FsIHVzYWdlIHdpbGwgY29tYmluZSB3aXRoXG4gKiBgU2NlbmVUcmFja2VyLmdldEFjdGl2ZVNjZW5lYCB0byBkZXRlcm1pbmUgdGhlIGNvbnRleHQgb2YgdGhlIGV2ZW50cy5cbiAqL1xuY2xhc3MgRmlsbFJhdGVIZWxwZXIge1xuICBfYW55QmxhbmtTdGFydFRpbWU6ID9udW1iZXIgPSBudWxsO1xuICBfZW5hYmxlZCA9IGZhbHNlO1xuICBfbGlzdE1ldHJpY3M6IExpc3RNZXRyaWNzQWdncmVnYXRvcjtcbiAgX2luZm86IEluZm8gPSBuZXcgSW5mbygpO1xuICBfbW9zdGx5QmxhbmtTdGFydFRpbWU6ID9udW1iZXIgPSBudWxsO1xuICBfc2FtcGxlc1N0YXJ0VGltZTogP251bWJlciA9IG51bGw7XG5cbiAgc3RhdGljIGFkZExpc3RlbmVyKGNhbGxiYWNrOiBGaWxsUmF0ZUluZm8gPT4gdm9pZCk6IHtcbiAgICByZW1vdmU6ICgpID0+IHZvaWQsXG4gICAgLi4uXG4gIH0ge1xuICAgIGlmIChfc2FtcGxlUmF0ZSA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKCdDYWxsIGBGaWxsUmF0ZUhlbHBlci5zZXRTYW1wbGVSYXRlYCBiZWZvcmUgYGFkZExpc3RlbmVyYC4nKTtcbiAgICB9XG4gICAgX2xpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVtb3ZlOiAoKSA9PiB7XG4gICAgICAgIF9saXN0ZW5lcnMgPSBfbGlzdGVuZXJzLmZpbHRlcihsaXN0ZW5lciA9PiBjYWxsYmFjayAhPT0gbGlzdGVuZXIpO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIHNldFNhbXBsZVJhdGUoc2FtcGxlUmF0ZTogbnVtYmVyKSB7XG4gICAgX3NhbXBsZVJhdGUgPSBzYW1wbGVSYXRlO1xuICB9XG5cbiAgc3RhdGljIHNldE1pblNhbXBsZUNvdW50KG1pblNhbXBsZUNvdW50OiBudW1iZXIpIHtcbiAgICBfbWluU2FtcGxlQ291bnQgPSBtaW5TYW1wbGVDb3VudDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxpc3RNZXRyaWNzOiBMaXN0TWV0cmljc0FnZ3JlZ2F0b3IpIHtcbiAgICB0aGlzLl9saXN0TWV0cmljcyA9IGxpc3RNZXRyaWNzO1xuICAgIHRoaXMuX2VuYWJsZWQgPSAoX3NhbXBsZVJhdGUgfHwgMCkgPiBNYXRoLnJhbmRvbSgpO1xuICAgIHRoaXMuX3Jlc2V0RGF0YSgpO1xuICB9XG5cbiAgYWN0aXZhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2VuYWJsZWQgJiYgdGhpcy5fc2FtcGxlc1N0YXJ0VGltZSA9PSBudWxsKSB7XG4gICAgICBERUJVRyAmJiBjb25zb2xlLmRlYnVnKCdGaWxsUmF0ZUhlbHBlcjogYWN0aXZhdGUnKTtcbiAgICAgIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuICB9XG5cbiAgZGVhY3RpdmF0ZUFuZEZsdXNoKCkge1xuICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX3NhbXBsZXNTdGFydFRpbWU7IC8vIGNvbnN0IGZvciBmbG93XG4gICAgaWYgKHN0YXJ0ID09IG51bGwpIHtcbiAgICAgIERFQlVHICYmXG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ0ZpbGxSYXRlSGVscGVyOiBiYWlsIG9uIGRlYWN0aXZhdGUgd2l0aCBubyBzdGFydCB0aW1lJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9pbmZvLnNhbXBsZV9jb3VudCA8IF9taW5TYW1wbGVDb3VudCkge1xuICAgICAgLy8gRG9uJ3QgYm90aGVyIHdpdGggdW5kZXItc2FtcGxlZCBldmVudHMuXG4gICAgICB0aGlzLl9yZXNldERhdGEoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG90YWxfdGltZV9zcGVudCA9IGdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0O1xuICAgIGNvbnN0IGluZm86IGFueSA9IHtcbiAgICAgIC4uLnRoaXMuX2luZm8sXG4gICAgICB0b3RhbF90aW1lX3NwZW50LFxuICAgIH07XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICBjb25zdCBkZXJpdmVkID0ge1xuICAgICAgICBhdmdfYmxhbmtuZXNzOiB0aGlzLl9pbmZvLnBpeGVsc19ibGFuayAvIHRoaXMuX2luZm8ucGl4ZWxzX3NhbXBsZWQsXG4gICAgICAgIGF2Z19zcGVlZDogdGhpcy5faW5mby5waXhlbHNfc2Nyb2xsZWQgLyAodG90YWxfdGltZV9zcGVudCAvIDEwMDApLFxuICAgICAgICBhdmdfc3BlZWRfd2hlbl9hbnlfYmxhbms6XG4gICAgICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfc3BlZWRfc3VtIC8gdGhpcy5faW5mby5hbnlfYmxhbmtfY291bnQsXG4gICAgICAgIGFueV9ibGFua19wZXJfbWluOlxuICAgICAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX2NvdW50IC8gKHRvdGFsX3RpbWVfc3BlbnQgLyAxMDAwIC8gNjApLFxuICAgICAgICBhbnlfYmxhbmtfdGltZV9mcmFjOiB0aGlzLl9pbmZvLmFueV9ibGFua19tcyAvIHRvdGFsX3RpbWVfc3BlbnQsXG4gICAgICAgIG1vc3RseV9ibGFua19wZXJfbWluOlxuICAgICAgICAgIHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX2NvdW50IC8gKHRvdGFsX3RpbWVfc3BlbnQgLyAxMDAwIC8gNjApLFxuICAgICAgICBtb3N0bHlfYmxhbmtfdGltZV9mcmFjOiB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19tcyAvIHRvdGFsX3RpbWVfc3BlbnQsXG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGVyaXZlZCkge1xuICAgICAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgICAgZGVyaXZlZFtrZXldID0gTWF0aC5yb3VuZCgxMDAwICogZGVyaXZlZFtrZXldKSAvIDEwMDA7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmRlYnVnKCdGaWxsUmF0ZUhlbHBlciBkZWFjdGl2YXRlQW5kRmx1c2g6ICcsIHtkZXJpdmVkLCBpbmZvfSk7XG4gICAgfVxuICAgIF9saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcihpbmZvKSk7XG4gICAgdGhpcy5fcmVzZXREYXRhKCk7XG4gIH1cblxuICBjb21wdXRlQmxhbmtuZXNzKFxuICAgIHByb3BzOiB7XG4gICAgICAuLi5DZWxsTWV0cmljUHJvcHMsXG4gICAgICBpbml0aWFsTnVtVG9SZW5kZXI/OiA/bnVtYmVyLFxuICAgICAgLi4uXG4gICAgfSxcbiAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0OiB7XG4gICAgICBmaXJzdDogbnVtYmVyLFxuICAgICAgbGFzdDogbnVtYmVyLFxuICAgICAgLi4uXG4gICAgfSxcbiAgICBzY3JvbGxNZXRyaWNzOiB7XG4gICAgICBkT2Zmc2V0OiBudW1iZXIsXG4gICAgICBvZmZzZXQ6IG51bWJlcixcbiAgICAgIHZlbG9jaXR5OiBudW1iZXIsXG4gICAgICB2aXNpYmxlTGVuZ3RoOiBudW1iZXIsXG4gICAgICAuLi5cbiAgICB9LFxuICApOiBudW1iZXIge1xuICAgIGlmIChcbiAgICAgICF0aGlzLl9lbmFibGVkIHx8XG4gICAgICBwcm9wcy5nZXRJdGVtQ291bnQocHJvcHMuZGF0YSkgPT09IDAgfHxcbiAgICAgIGNlbGxzQXJvdW5kVmlld3BvcnQubGFzdCA8IGNlbGxzQXJvdW5kVmlld3BvcnQuZmlyc3QgfHxcbiAgICAgIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPT0gbnVsbFxuICAgICkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGNvbnN0IHtkT2Zmc2V0LCBvZmZzZXQsIHZlbG9jaXR5LCB2aXNpYmxlTGVuZ3RofSA9IHNjcm9sbE1ldHJpY3M7XG5cbiAgICAvLyBEZW5vbWluYXRvciBtZXRyaWNzIHRoYXQgd2UgdHJhY2sgZm9yIGFsbCBldmVudHMgLSBtb3N0IG9mIHRoZSB0aW1lIHRoZXJlIGlzIG5vIGJsYW5rbmVzcyBhbmRcbiAgICAvLyB3ZSB3YW50IHRvIGNhcHR1cmUgdGhhdC5cbiAgICB0aGlzLl9pbmZvLnNhbXBsZV9jb3VudCsrO1xuICAgIHRoaXMuX2luZm8ucGl4ZWxzX3NhbXBsZWQgKz0gTWF0aC5yb3VuZCh2aXNpYmxlTGVuZ3RoKTtcbiAgICB0aGlzLl9pbmZvLnBpeGVsc19zY3JvbGxlZCArPSBNYXRoLnJvdW5kKE1hdGguYWJzKGRPZmZzZXQpKTtcbiAgICBjb25zdCBzY3JvbGxTcGVlZCA9IE1hdGgucm91bmQoTWF0aC5hYnModmVsb2NpdHkpICogMTAwMCk7IC8vIHB4IC8gc2VjXG5cbiAgICAvLyBXaGV0aGVyIGJsYW5rIG5vdyBvciBub3QsIHJlY29yZCB0aGUgZWxhcHNlZCB0aW1lIGJsYW5rIGlmIHdlIHdlcmUgYmxhbmsgbGFzdCB0aW1lLlxuICAgIGNvbnN0IG5vdyA9IGdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKTtcbiAgICBpZiAodGhpcy5fYW55QmxhbmtTdGFydFRpbWUgIT0gbnVsbCkge1xuICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfbXMgKz0gbm93IC0gdGhpcy5fYW55QmxhbmtTdGFydFRpbWU7XG4gICAgfVxuICAgIHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lID0gbnVsbDtcbiAgICBpZiAodGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgIT0gbnVsbCkge1xuICAgICAgdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfbXMgKz0gbm93IC0gdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWU7XG4gICAgfVxuICAgIHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lID0gbnVsbDtcblxuICAgIGxldCBibGFua1RvcCA9IDA7XG4gICAgbGV0IGZpcnN0ID0gY2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdDtcbiAgICBsZXQgZmlyc3RGcmFtZSA9IHRoaXMuX2xpc3RNZXRyaWNzLmdldENlbGxNZXRyaWNzKGZpcnN0LCBwcm9wcyk7XG4gICAgd2hpbGUgKFxuICAgICAgZmlyc3QgPD0gY2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0ICYmXG4gICAgICAoIWZpcnN0RnJhbWUgfHwgIWZpcnN0RnJhbWUuaXNNb3VudGVkKVxuICAgICkge1xuICAgICAgZmlyc3RGcmFtZSA9IHRoaXMuX2xpc3RNZXRyaWNzLmdldENlbGxNZXRyaWNzKGZpcnN0LCBwcm9wcyk7XG4gICAgICBmaXJzdCsrO1xuICAgIH1cbiAgICAvLyBPbmx5IGNvdW50IGJsYW5rVG9wIGlmIHdlIGFyZW4ndCByZW5kZXJpbmcgdGhlIGZpcnN0IGl0ZW0sIG90aGVyd2lzZSB3ZSB3aWxsIGNvdW50IHRoZSBoZWFkZXJcbiAgICAvLyBhcyBibGFuay5cbiAgICBpZiAoZmlyc3RGcmFtZSAmJiBmaXJzdCA+IDApIHtcbiAgICAgIGJsYW5rVG9wID0gTWF0aC5taW4oXG4gICAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICAgIE1hdGgubWF4KDAsIGZpcnN0RnJhbWUub2Zmc2V0IC0gb2Zmc2V0KSxcbiAgICAgICk7XG4gICAgfVxuICAgIGxldCBibGFua0JvdHRvbSA9IDA7XG4gICAgbGV0IGxhc3QgPSBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3Q7XG4gICAgbGV0IGxhc3RGcmFtZSA9IHRoaXMuX2xpc3RNZXRyaWNzLmdldENlbGxNZXRyaWNzKGxhc3QsIHByb3BzKTtcbiAgICB3aGlsZSAoXG4gICAgICBsYXN0ID49IGNlbGxzQXJvdW5kVmlld3BvcnQuZmlyc3QgJiZcbiAgICAgICghbGFzdEZyYW1lIHx8ICFsYXN0RnJhbWUuaXNNb3VudGVkKVxuICAgICkge1xuICAgICAgbGFzdEZyYW1lID0gdGhpcy5fbGlzdE1ldHJpY3MuZ2V0Q2VsbE1ldHJpY3MobGFzdCwgcHJvcHMpO1xuICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICAvLyBPbmx5IGNvdW50IGJsYW5rQm90dG9tIGlmIHdlIGFyZW4ndCByZW5kZXJpbmcgdGhlIGxhc3QgaXRlbSwgb3RoZXJ3aXNlIHdlIHdpbGwgY291bnQgdGhlXG4gICAgLy8gZm9vdGVyIGFzIGJsYW5rLlxuICAgIGlmIChsYXN0RnJhbWUgJiYgbGFzdCA8IHByb3BzLmdldEl0ZW1Db3VudChwcm9wcy5kYXRhKSAtIDEpIHtcbiAgICAgIGNvbnN0IGJvdHRvbUVkZ2UgPSBsYXN0RnJhbWUub2Zmc2V0ICsgbGFzdEZyYW1lLmxlbmd0aDtcbiAgICAgIGJsYW5rQm90dG9tID0gTWF0aC5taW4oXG4gICAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICAgIE1hdGgubWF4KDAsIG9mZnNldCArIHZpc2libGVMZW5ndGggLSBib3R0b21FZGdlKSxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHBpeGVsc19ibGFuayA9IE1hdGgucm91bmQoYmxhbmtUb3AgKyBibGFua0JvdHRvbSk7XG4gICAgY29uc3QgYmxhbmtuZXNzID0gcGl4ZWxzX2JsYW5rIC8gdmlzaWJsZUxlbmd0aDtcbiAgICBpZiAoYmxhbmtuZXNzID4gMCkge1xuICAgICAgdGhpcy5fYW55QmxhbmtTdGFydFRpbWUgPSBub3c7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19zcGVlZF9zdW0gKz0gc2Nyb2xsU3BlZWQ7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19jb3VudCsrO1xuICAgICAgdGhpcy5faW5mby5waXhlbHNfYmxhbmsgKz0gcGl4ZWxzX2JsYW5rO1xuICAgICAgaWYgKGJsYW5rbmVzcyA+IDAuNSkge1xuICAgICAgICB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSA9IG5vdztcbiAgICAgICAgdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfY291bnQrKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNjcm9sbFNwZWVkIDwgMC4wMSB8fCBNYXRoLmFicyhkT2Zmc2V0KSA8IDEpIHtcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZUFuZEZsdXNoKCk7XG4gICAgfVxuICAgIHJldHVybiBibGFua25lc3M7XG4gIH1cblxuICBlbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xuICB9XG5cbiAgX3Jlc2V0RGF0YSgpIHtcbiAgICB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG4gICAgdGhpcy5faW5mbyA9IG5ldyBJbmZvKCk7XG4gICAgdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPSBudWxsO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmlsbFJhdGVIZWxwZXI7XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBLElBQUFDLGdCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRSxhQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRyxnQkFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBSWIsSUFBQUksc0JBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUE0RCxTQUFBSyxRQUFBQyxDQUFBLEVBQUFDLENBQUEsUUFBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLElBQUEsQ0FBQUosQ0FBQSxPQUFBRyxNQUFBLENBQUFFLHFCQUFBLFFBQUFDLENBQUEsR0FBQUgsTUFBQSxDQUFBRSxxQkFBQSxDQUFBTCxDQUFBLEdBQUFDLENBQUEsS0FBQUssQ0FBQSxHQUFBQSxDQUFBLENBQUFDLE1BQUEsV0FBQU4sQ0FBQSxXQUFBRSxNQUFBLENBQUFLLHdCQUFBLENBQUFSLENBQUEsRUFBQUMsQ0FBQSxFQUFBUSxVQUFBLE9BQUFQLENBQUEsQ0FBQVEsSUFBQSxDQUFBQyxLQUFBLENBQUFULENBQUEsRUFBQUksQ0FBQSxZQUFBSixDQUFBO0FBQUEsU0FBQVUsY0FBQVosQ0FBQSxhQUFBQyxDQUFBLE1BQUFBLENBQUEsR0FBQVksU0FBQSxDQUFBQyxN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