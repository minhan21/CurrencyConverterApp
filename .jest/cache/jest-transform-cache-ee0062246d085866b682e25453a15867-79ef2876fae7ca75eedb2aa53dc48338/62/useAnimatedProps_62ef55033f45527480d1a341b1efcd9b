2888fdbf2c02ebac7ba7a99e65fbe4b8
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useAnimatedProps;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var ReactNativeFeatureFlags = _interopRequireWildcard(require("../../src/private/featureflags/ReactNativeFeatureFlags"));
var _ReactFabricPublicInstanceUtils = require("../ReactNative/ReactFabricPublicInstance/ReactFabricPublicInstanceUtils");
var _useRefEffect = _interopRequireDefault(require("../Utilities/useRefEffect"));
var _AnimatedEvent = require("./AnimatedEvent");
var _NativeAnimatedHelper = _interopRequireDefault(require("./NativeAnimatedHelper"));
var _AnimatedProps = _interopRequireDefault(require("./nodes/AnimatedProps"));
var _react = require("react");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function useAnimatedProps(props) {
  var _useReducer = (0, _react.useReducer)(function (count) {
      return count + 1;
    }, 0),
    _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),
    scheduleUpdate = _useReducer2[1];
  var onUpdateRef = (0, _react.useRef)(null);
  var timerRef = (0, _react.useRef)(null);
  var node = (0, _react.useMemo)(function () {
    return new _AnimatedProps.default(props, function () {
      return onUpdateRef.current == null ? void 0 : onUpdateRef.current();
    });
  }, [props]);
  var useNativePropsInFabric = ReactNativeFeatureFlags.shouldUseSetNativePropsInFabric();
  useAnimatedPropsLifecycle(node);
  var refEffect = (0, _react.useCallback)(function (instance) {
    node.setNativeView(instance);
    onUpdateRef.current = function () {
      if ("test" === 'test' || typeof instance !== 'object' || typeof (instance == null ? void 0 : instance.setNativeProps) !== 'function' || isFabricInstance(instance) && !useNativePropsInFabric) {
        scheduleUpdate();
      } else if (!node.__isNative) {
        instance.setNativeProps(node.__getAnimatedValue());
        if (isFabricInstance(instance)) {
          if (timerRef.current != null) {
            clearTimeout(timerRef.current);
          }
          timerRef.current = setTimeout(function () {
            timerRef.current = null;
            scheduleUpdate();
          }, 48);
        }
      }
    };
    var target = getEventTarget(instance);
    var events = [];
    for (var propName in props) {
      var propValue = props[propName];
      if (propValue instanceof _AnimatedEvent.AnimatedEvent && propValue.__isNative) {
        propValue.__attach(target, propName);
        events.push([propName, propValue]);
      }
    }
    return function () {
      onUpdateRef.current = null;
      for (var _ref of events) {
        var _ref2 = (0, _slicedToArray2.default)(_ref, 2);
        var _propName = _ref2[0];
        var _propValue = _ref2[1];
        _propValue.__detach(target, _propName);
      }
    };
  }, [props, node, useNativePropsInFabric]);
  var callbackRef = (0, _useRefEffect.default)(refEffect);
  return [reduceAnimatedProps(node), callbackRef];
}
function reduceAnimatedProps(node) {
  return _objectSpread(_objectSpread({}, node.__getValue()), {}, {
    collapsable: false
  });
}
function useAnimatedPropsLifecycle(node) {
  var prevNodeRef = (0, _react.useRef)(null);
  var isUnmountingRef = (0, _react.useRef)(false);
  (0, _react.useEffect)(function () {
    _NativeAnimatedHelper.default.API.flushQueue();
  });
  (0, _react.useLayoutEffect)(function () {
    isUnmountingRef.current = false;
    return function () {
      isUnmountingRef.current = true;
    };
  }, []);
  (0, _react.useLayoutEffect)(function () {
    node.__attach();
    if (prevNodeRef.current != null) {
      var prevNode = prevNodeRef.current;
      prevNode.__restoreDefaultValues();
      prevNode.__detach();
      prevNodeRef.current = null;
    }
    return function () {
      if (isUnmountingRef.current) {
        node.__detach();
      } else {
        prevNodeRef.current = node;
      }
    };
  }, [node]);
}
function getEventTarget(instance) {
  return typeof instance === 'object' && typeof (instance == null ? void 0 : instance.getScrollableNode) === 'function' ? instance.getScrollableNode() : instance;
}
function isFabricInstance(instance) {
  var _instance$getScrollRe;
  return (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null ? void 0 : instance.getNativeScrollRef == null ? void 0 : instance.getNativeScrollRef()) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null ? void 0 : instance.getScrollResponder == null ? void 0 : (_instance$getScrollRe = instance.getScrollResponder()) == null ? void 0 : _instance$getScrollRe.getNativeScrollRef == null ? void 0 : _instance$getScrollRe.getNativeScrollRef());
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsInVzZUFuaW1hdGVkUHJvcHMiLCJfZGVmaW5lUHJvcGVydHkyIiwiX3NsaWNlZFRvQXJyYXkyIiwiUmVhY3ROYXRpdmVGZWF0dXJlRmxhZ3MiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9SZWFjdEZhYnJpY1B1YmxpY0luc3RhbmNlVXRpbHMiLCJfdXNlUmVmRWZmZWN0IiwiX0FuaW1hdGVkRXZlbnQiLCJfTmF0aXZlQW5pbWF0ZWRIZWxwZXIiLCJfQW5pbWF0ZWRQcm9wcyIsIl9yZWFjdCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJfdXNlUmVkdWNlciIsInVzZVJlZHVjZXIiLCJjb3VudCIsIl91c2VSZWR1Y2VyMiIsInNjaGVkdWxlVXBkYXRlIiwib25VcGRhdGVSZWYiLCJ1c2VSZWYiLCJ0aW1lclJlZiIsIm5vZGUiLCJ1c2VNZW1vIiwiQW5pbWF0ZWRQcm9wcyIsImN1cnJlbnQiLCJ1c2VOYXRpdmVQcm9wc0luRmFicmljIiwic2hvdWxkVXNlU2V0TmF0aXZlUHJvcHNJbkZhYnJpYyIsInVzZUFuaW1hdGVkUHJvcHNMaWZlY3ljbGUiLCJyZWZFZmZlY3QiLCJ1c2VDYWxsYmFjayIsImluc3RhbmNlIiwic2V0TmF0aXZlVmlldyIsInNldE5hdGl2ZVByb3BzIiwiaXNGYWJyaWNJbnN0YW5jZSIsIl9faXNOYXRpdmUiLCJfX2dldEFuaW1hdGVkVmFsdWUiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidGFyZ2V0IiwiZ2V0RXZlbnRUYXJnZXQiLCJldmVudHMiLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsIkFuaW1hdGVkRXZlbnQiLCJfX2F0dGFjaCIsIl9yZWYiLCJfcmVmMiIsIl9fZGV0YWNoIiwiY2FsbGJhY2tSZWYiLCJ1c2VSZWZFZmZlY3QiLCJyZWR1Y2VBbmltYXRlZFByb3BzIiwiX19nZXRWYWx1ZSIsImNvbGxhcHNhYmxlIiwicHJldk5vZGVSZWYiLCJpc1VubW91bnRpbmdSZWYiLCJ1c2VFZmZlY3QiLCJOYXRpdmVBbmltYXRlZEhlbHBlciIsIkFQSSIsImZsdXNoUXVldWUiLCJ1c2VMYXlvdXRFZmZlY3QiLCJwcmV2Tm9kZSIsIl9fcmVzdG9yZURlZmF1bHRWYWx1ZXMiLCJnZXRTY3JvbGxhYmxlTm9kZSIsIl9pbnN0YW5jZSRnZXRTY3JvbGxSZSIsImlzRmFicmljUHVibGljSW5zdGFuY2UiLCJnZXROYXRpdmVTY3JvbGxSZWYiLCJnZXRTY3JvbGxSZXNwb25kZXIiXSwic291cmNlcyI6WyJ1c2VBbmltYXRlZFByb3BzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAqIGFzIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzIGZyb20gJy4uLy4uL3NyYy9wcml2YXRlL2ZlYXR1cmVmbGFncy9SZWFjdE5hdGl2ZUZlYXR1cmVGbGFncyc7XG5pbXBvcnQge2lzUHVibGljSW5zdGFuY2UgYXMgaXNGYWJyaWNQdWJsaWNJbnN0YW5jZX0gZnJvbSAnLi4vUmVhY3ROYXRpdmUvUmVhY3RGYWJyaWNQdWJsaWNJbnN0YW5jZS9SZWFjdEZhYnJpY1B1YmxpY0luc3RhbmNlVXRpbHMnO1xuaW1wb3J0IHVzZVJlZkVmZmVjdCBmcm9tICcuLi9VdGlsaXRpZXMvdXNlUmVmRWZmZWN0JztcbmltcG9ydCB7QW5pbWF0ZWRFdmVudH0gZnJvbSAnLi9BbmltYXRlZEV2ZW50JztcbmltcG9ydCBOYXRpdmVBbmltYXRlZEhlbHBlciBmcm9tICcuL05hdGl2ZUFuaW1hdGVkSGVscGVyJztcbmltcG9ydCBBbmltYXRlZFByb3BzIGZyb20gJy4vbm9kZXMvQW5pbWF0ZWRQcm9wcyc7XG5pbXBvcnQge1xuICB1c2VDYWxsYmFjayxcbiAgdXNlRWZmZWN0LFxuICB1c2VMYXlvdXRFZmZlY3QsXG4gIHVzZU1lbW8sXG4gIHVzZVJlZHVjZXIsXG4gIHVzZVJlZixcbn0gZnJvbSAncmVhY3QnO1xuXG50eXBlIFJlZHVjZWRQcm9wczxUUHJvcHM+ID0ge1xuICAuLi5UUHJvcHMsXG4gIGNvbGxhcHNhYmxlOiBib29sZWFuLFxuICAuLi5cbn07XG50eXBlIENhbGxiYWNrUmVmPFQ+ID0gVCA9PiBtaXhlZDtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlQW5pbWF0ZWRQcm9wczxUUHJvcHM6IHsuLi59LCBUSW5zdGFuY2U+KFxuICBwcm9wczogVFByb3BzLFxuKTogW1JlZHVjZWRQcm9wczxUUHJvcHM+LCBDYWxsYmFja1JlZjxUSW5zdGFuY2UgfCBudWxsPl0ge1xuICBjb25zdCBbLCBzY2hlZHVsZVVwZGF0ZV0gPSB1c2VSZWR1Y2VyPG51bWJlciwgdm9pZD4oY291bnQgPT4gY291bnQgKyAxLCAwKTtcbiAgY29uc3Qgb25VcGRhdGVSZWYgPSB1c2VSZWY8PygpID0+IHZvaWQ+KG51bGwpO1xuICBjb25zdCB0aW1lclJlZiA9IHVzZVJlZjxUaW1lb3V0SUQgfCBudWxsPihudWxsKTtcblxuICAvLyBUT0RPOiBPbmx5IGludmFsaWRhdGUgYG5vZGVgIGlmIGFuaW1hdGVkIHByb3BzIG9yIGBzdHlsZWAgY2hhbmdlLiBJbiB0aGVcbiAgLy8gcHJldmlvdXMgaW1wbGVtZW50YXRpb24sIHdlIHBlcm1pdHRlZCBgc3R5bGVgIHRvIG92ZXJyaWRlIHByb3BzIHdpdGggdGhlXG4gIC8vIHNhbWUgbmFtZSBwcm9wZXJ0eSBuYW1lIGFzIHN0eWxlcywgc28gd2UgY2FuIHByb2JhYmx5IGNvbnRpbnVlIGRvaW5nIHRoYXQuXG4gIC8vIFRoZSBvcmRlcmluZyBvZiBvdGhlciBwcm9wcyAqc2hvdWxkKiBub3QgbWF0dGVyLlxuICBjb25zdCBub2RlID0gdXNlTWVtbyhcbiAgICAoKSA9PiBuZXcgQW5pbWF0ZWRQcm9wcyhwcm9wcywgKCkgPT4gb25VcGRhdGVSZWYuY3VycmVudD8uKCkpLFxuICAgIFtwcm9wc10sXG4gICk7XG4gIGNvbnN0IHVzZU5hdGl2ZVByb3BzSW5GYWJyaWMgPVxuICAgIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzLnNob3VsZFVzZVNldE5hdGl2ZVByb3BzSW5GYWJyaWMoKTtcbiAgdXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZShub2RlKTtcblxuICAvLyBUT0RPOiBUaGlzIFwiZWZmZWN0XCIgZG9lcyB0aHJlZSB0aGluZ3M6XG4gIC8vXG4gIC8vICAgMSkgQ2FsbCBgc2V0TmF0aXZlVmlld2AuXG4gIC8vICAgMikgVXBkYXRlIGBvblVwZGF0ZVJlZmAuXG4gIC8vICAgMykgVXBkYXRlIGxpc3RlbmVycyBmb3IgYEFuaW1hdGVkRXZlbnRgIHByb3BzLlxuICAvL1xuICAvLyBJZGVhbGx5LCBlYWNoIG9mIHRoZXNlIHdvdWxkIGJlIHNlcGFyYXRlIFwiZWZmZWN0c1wiIHNvIHRoYXQgdGhleSBhcmUgbm90XG4gIC8vIHVubmVjZXNzYXJpbHkgcmUtcnVuIHdoZW4gaXJyZWxldmFudCBkZXBlbmRlbmNpZXMgY2hhbmdlLiBGb3IgZXhhbXBsZSwgd2VcbiAgLy8gc2hvdWxkIGJlIGFibGUgdG8gaG9pc3QgYWxsIGBBbmltYXRlZEV2ZW50YCBwcm9wcyBhbmQgb25seSBkbyAjMyBpZiBlaXRoZXJcbiAgLy8gdGhlIGBBbmltYXRlZEV2ZW50YCBwcm9wcyBjaGFuZ2Ugb3IgYGluc3RhbmNlYCBjaGFuZ2VzLlxuICAvL1xuICAvLyBCdXQgdGhlcmUgaXMgbm8gd2F5IHRvIHRyYW5zcGFyZW50bHkgY29tcG9zZSB0aHJlZSBzZXBhcmF0ZSBjYWxsYmFjayByZWZzLFxuICAvLyBzbyB3ZSBqdXN0IGNvbWJpbmUgdGhlbSBhbGwgaW50byBvbmUgZm9yIG5vdy5cbiAgY29uc3QgcmVmRWZmZWN0ID0gdXNlQ2FsbGJhY2soXG4gICAgKGluc3RhbmNlOiBUSW5zdGFuY2UpID0+IHtcbiAgICAgIC8vIE5PVEU6IFRoaXMgbWF5IGJlIGNhbGxlZCBtb3JlIG9mdGVuIHRoYW4gbmVjZXNzYXJ5IChlLmcuIHdoZW4gYHByb3BzYFxuICAgICAgLy8gY2hhbmdlcyksIGJ1dCBgc2V0TmF0aXZlVmlld2AgYWxyZWFkeSBvcHRpbWl6ZXMgZm9yIHRoYXQuXG4gICAgICBub2RlLnNldE5hdGl2ZVZpZXcoaW5zdGFuY2UpO1xuXG4gICAgICAvLyBOT1RFOiBXaGVuIHVzaW5nIHRoZSBKUyBhbmltYXRpb24gZHJpdmVyLCB0aGlzIGNhbGxiYWNrIGlzIGNhbGxlZCBvblxuICAgICAgLy8gZXZlcnkgYW5pbWF0aW9uIGZyYW1lLiBXaGVuIHVzaW5nIHRoZSBuYXRpdmUgZHJpdmVyLCB0aGlzIGNhbGxiYWNrIGlzXG4gICAgICAvLyBjYWxsZWQgd2hlbiB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlcy5cbiAgICAgIG9uVXBkYXRlUmVmLmN1cnJlbnQgPSAoKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnIHx8XG4gICAgICAgICAgdHlwZW9mIGluc3RhbmNlICE9PSAnb2JqZWN0JyB8fFxuICAgICAgICAgIHR5cGVvZiBpbnN0YW5jZT8uc2V0TmF0aXZlUHJvcHMgIT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgICAoaXNGYWJyaWNJbnN0YW5jZShpbnN0YW5jZSkgJiYgIXVzZU5hdGl2ZVByb3BzSW5GYWJyaWMpXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIFNjaGVkdWxlIGFuIHVwZGF0ZSBmb3IgdGhpcyBjb21wb25lbnQgdG8gdXBkYXRlIGByZWR1Y2VkUHJvcHNgLFxuICAgICAgICAgIC8vIGJ1dCBkbyBub3QgY29tcHV0ZSBpdCBpbW1lZGlhdGVseS4gSWYgYSBwYXJlbnQgYWxzbyB1cGRhdGVkLCB3ZVxuICAgICAgICAgIC8vIG5lZWQgdG8gbWVyZ2UgdGhvc2UgbmV3IHByb3BzIGluIGJlZm9yZSB1cGRhdGluZy5cbiAgICAgICAgICBzY2hlZHVsZVVwZGF0ZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKCFub2RlLl9faXNOYXRpdmUpIHtcbiAgICAgICAgICAvLyAkRmxvd0lnbm9yZVtub3QtYS1mdW5jdGlvbl0gLSBBc3N1bWUgaXQncyBzdGlsbCBhIGZ1bmN0aW9uLlxuICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV1cbiAgICAgICAgICBpbnN0YW5jZS5zZXROYXRpdmVQcm9wcyhub2RlLl9fZ2V0QW5pbWF0ZWRWYWx1ZSgpKTtcbiAgICAgICAgICBpZiAoaXNGYWJyaWNJbnN0YW5jZShpbnN0YW5jZSkpIHtcbiAgICAgICAgICAgIC8vIEtlZXBpbmcgc3RhdGUgb2YgRmliZXIgdHJlZSBhbmQgU2hhZG93IHRyZWUgaW4gc3luYy5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGRvbmUgYnkgY2FsbGluZyBgc2NoZWR1bGVVcGRhdGVgIHdoaWNoIHdpbGwgdHJpZ2dlciBhIGNvbW1pdC5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIFJlYWN0IGNvbW1pdCBpcyBub3QgZmFzdCBlbm91Z2ggdG8gZHJpdmUgYW5pbWF0aW9ucy5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgd2hlcmUgc2V0TmF0aXZlUHJvcHMgY29tZXMgaW4gaGFuZHkgYnV0IHRoZSBzdGF0ZSBiZXR3ZWVuXG4gICAgICAgICAgICAvLyBGaWJlciB0cmVlIGFuZCBTaGFkb3cgdHJlZSBuZWVkcyB0byBiZSBrZXB0IGluIHN5bmMuXG4gICAgICAgICAgICAvLyBUaGUgZ29hbCBpcyB0byBjYWxsIGBzY2hlZHVsZVVwZGF0ZWAgYXMgbGl0dGxlIGFzIHBvc3NpYmxlIHRvIG1haW50YWluXG4gICAgICAgICAgICAvLyBwZXJmb3JtYW5jZSBidXQgZnJlcXVlbnRseSBlbm91Z2ggdG8ga2VlcCBzdGF0ZSBpbiBzeW5jLlxuICAgICAgICAgICAgLy8gRGVib3VuY2UgaXMgc2V0IHRvIDQ4bXMsIHdoaWNoIGlzIDMgKiB0aGUgZHVyYXRpb24gb2YgYSBmcmFtZS5cbiAgICAgICAgICAgIC8vIDMgZnJhbWVzIHdhcyB0aGUgaGlnaGVzdCB2YWx1ZSB3aGVyZSBmbGlja2VyaW5nIHN0YXRlIHdhcyBub3Qgb2JzZXJ2ZWQuXG4gICAgICAgICAgICBpZiAodGltZXJSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lclJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWVyUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdGltZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgICAgIHNjaGVkdWxlVXBkYXRlKCk7XG4gICAgICAgICAgICB9LCA0OCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjb25zdCB0YXJnZXQgPSBnZXRFdmVudFRhcmdldChpbnN0YW5jZSk7XG4gICAgICBjb25zdCBldmVudHMgPSBbXTtcblxuICAgICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBwcm9wcykge1xuICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgICAgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZEV2ZW50ICYmIHByb3BWYWx1ZS5fX2lzTmF0aXZlKSB7XG4gICAgICAgICAgcHJvcFZhbHVlLl9fYXR0YWNoKHRhcmdldCwgcHJvcE5hbWUpO1xuICAgICAgICAgIGV2ZW50cy5wdXNoKFtwcm9wTmFtZSwgcHJvcFZhbHVlXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgb25VcGRhdGVSZWYuY3VycmVudCA9IG51bGw7XG5cbiAgICAgICAgZm9yIChjb25zdCBbcHJvcE5hbWUsIHByb3BWYWx1ZV0gb2YgZXZlbnRzKSB7XG4gICAgICAgICAgcHJvcFZhbHVlLl9fZGV0YWNoKHRhcmdldCwgcHJvcE5hbWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgW3Byb3BzLCBub2RlLCB1c2VOYXRpdmVQcm9wc0luRmFicmljXSxcbiAgKTtcbiAgY29uc3QgY2FsbGJhY2tSZWYgPSB1c2VSZWZFZmZlY3Q8VEluc3RhbmNlPihyZWZFZmZlY3QpO1xuXG4gIHJldHVybiBbcmVkdWNlQW5pbWF0ZWRQcm9wczxUUHJvcHM+KG5vZGUpLCBjYWxsYmFja1JlZl07XG59XG5cbmZ1bmN0aW9uIHJlZHVjZUFuaW1hdGVkUHJvcHM8VFByb3BzPihcbiAgbm9kZTogQW5pbWF0ZWRQcm9wcyxcbik6IFJlZHVjZWRQcm9wczxUUHJvcHM+IHtcbiAgLy8gRm9yY2UgYGNvbGxhcHNhYmxlYCB0byBiZSBmYWxzZSBzbyB0aGF0IHRoZSBuYXRpdmUgdmlldyBpcyBub3QgZmxhdHRlbmVkLlxuICAvLyBGbGF0dGVuZWQgdmlld3MgY2Fubm90IGJlIGFjY3VyYXRlbHkgcmVmZXJlbmNlZCBieSB0aGUgbmF0aXZlIGRyaXZlci5cbiAgcmV0dXJuIHtcbiAgICAuLi5ub2RlLl9fZ2V0VmFsdWUoKSxcbiAgICBjb2xsYXBzYWJsZTogZmFsc2UsXG4gIH07XG59XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgbGlmZWN5Y2xlIG9mIHRoZSBzdXBwbGllZCBgQW5pbWF0ZWRQcm9wc2AgYnkgaW52b2tpbmcgYF9fYXR0YWNoYFxuICogYW5kIGBfX2RldGFjaGAuIEhvd2V2ZXIsIHRoaXMgaXMgbW9yZSBjb21wbGljYXRlZCBiZWNhdXNlIGBBbmltYXRlZFByb3BzYFxuICogdXNlcyByZWZlcmVuY2UgY291bnRpbmcgdG8gZGV0ZXJtaW5lIHdoZW4gdG8gcmVjdXJzaXZlbHkgZGV0YWNoIGl0cyBjaGlsZHJlblxuICogbm9kZXMuIFNvIGluIG9yZGVyIHRvIG9wdGltaXplIHRoaXMsIHdlIGF2b2lkIGRldGFjaGluZyB1bnRpbCB0aGUgbmV4dCBhdHRhY2hcbiAqIHVubGVzcyB3ZSBhcmUgdW5tb3VudGluZy5cbiAqL1xuZnVuY3Rpb24gdXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZShub2RlOiBBbmltYXRlZFByb3BzKTogdm9pZCB7XG4gIGNvbnN0IHByZXZOb2RlUmVmID0gdXNlUmVmPD9BbmltYXRlZFByb3BzPihudWxsKTtcbiAgY29uc3QgaXNVbm1vdW50aW5nUmVmID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEl0IGlzIG9rIGZvciBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGNhbGwgYGZsdXNoUXVldWVgIGJlY2F1c2UgaXQgbm9vcHNcbiAgICAvLyBpZiB0aGUgcXVldWUgaXMgZW1wdHkuIFdoZW4gbXVsdGlwbGUgYW5pbWF0ZWQgY29tcG9uZW50cyBhcmUgbW91bnRlZCBhdFxuICAgIC8vIHRoZSBzYW1lIHRpbWUuIE9ubHkgZmlyc3QgY29tcG9uZW50IGZsdXNoZXMgdGhlIHF1ZXVlIGFuZCB0aGUgb3RoZXJzIHdpbGwgbm9vcC5cbiAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5BUEkuZmx1c2hRdWV1ZSgpO1xuICB9KTtcblxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGlzVW5tb3VudGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzVW5tb3VudGluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBub2RlLl9fYXR0YWNoKCk7XG4gICAgaWYgKHByZXZOb2RlUmVmLmN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgY29uc3QgcHJldk5vZGUgPSBwcmV2Tm9kZVJlZi5jdXJyZW50O1xuICAgICAgLy8gVE9ETzogU3RvcCByZXN0b3JpbmcgZGVmYXVsdCB2YWx1ZXMgKHVubGVzcyBgcmVzZXRgIGlzIGNhbGxlZCkuXG4gICAgICBwcmV2Tm9kZS5fX3Jlc3RvcmVEZWZhdWx0VmFsdWVzKCk7XG4gICAgICBwcmV2Tm9kZS5fX2RldGFjaCgpO1xuICAgICAgcHJldk5vZGVSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoaXNVbm1vdW50aW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gTk9URTogRG8gbm90IHJlc3RvcmUgZGVmYXVsdCB2YWx1ZXMgb24gdW5tb3VudCwgc2VlIEQxODE5NzczNS5cbiAgICAgICAgbm9kZS5fX2RldGFjaCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldk5vZGVSZWYuY3VycmVudCA9IG5vZGU7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW25vZGVdKTtcbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQ8VEluc3RhbmNlPihpbnN0YW5jZTogVEluc3RhbmNlKTogVEluc3RhbmNlIHtcbiAgcmV0dXJuIHR5cGVvZiBpbnN0YW5jZSA9PT0gJ29iamVjdCcgJiZcbiAgICB0eXBlb2YgaW5zdGFuY2U/LmdldFNjcm9sbGFibGVOb2RlID09PSAnZnVuY3Rpb24nXG4gICAgPyAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS11c2VdIC0gTGVnYWN5IGluc3RhbmNlIGFzc3VtcHRpb25zLlxuICAgICAgaW5zdGFuY2UuZ2V0U2Nyb2xsYWJsZU5vZGUoKVxuICAgIDogaW5zdGFuY2U7XG59XG5cbi8vICRGbG93Rml4TWVbdW5jbGVhci10eXBlXSAtIExlZ2FjeSBpbnN0YW5jZSBhc3N1bXB0aW9ucy5cbmZ1bmN0aW9uIGlzRmFicmljSW5zdGFuY2UoaW5zdGFuY2U6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIGlzRmFicmljUHVibGljSW5zdGFuY2UoaW5zdGFuY2UpIHx8XG4gICAgLy8gU29tZSBjb21wb25lbnRzIGhhdmUgYSBzZXROYXRpdmVQcm9wcyBmdW5jdGlvbiBidXQgYXJlbid0IGEgaG9zdCBjb21wb25lbnRcbiAgICAvLyBzdWNoIGFzIGxpc3RzIGxpa2UgRmxhdExpc3QgYW5kIFNlY3Rpb25MaXN0LiBUaGVzZSBzaG91bGQgYWxzbyB1c2VcbiAgICAvLyBmb3JjZVVwZGF0ZSBpbiBGYWJyaWMgc2luY2Ugc2V0TmF0aXZlUHJvcHMgZG9lc24ndCBleGlzdCBvbiB0aGUgdW5kZXJseWluZ1xuICAgIC8vIGhvc3QgY29tcG9uZW50LiBUaGlzIGNyYXp5IGhhY2sgaXMgZXNzZW50aWFsbHkgc3BlY2lhbCBjYXNpbmcgdGhvc2UgbGlzdHMgYW5kXG4gICAgLy8gU2Nyb2xsVmlldyBpdHNlbGYgdG8gdXNlIGZvcmNlVXBkYXRlIGluIEZhYnJpYy5cbiAgICAvLyBJZiB0aGVzZSBjb21wb25lbnRzIGVuZCB1cCB1c2luZyBmb3J3YXJkUmVmIHRoZW4gdGhlc2UgaGFja3MgY2FuIGdvIGF3YXlcbiAgICAvLyBhcyBpbnN0YW5jZSB3b3VsZCBhY3R1YWxseSBiZSB0aGUgdW5kZXJseWluZyBob3N0IGNvbXBvbmVudCBhbmQgdGhlIGFib3ZlIGNoZWNrXG4gICAgLy8gd291bGQgYmUgc3VmZmljaWVudC5cbiAgICBpc0ZhYnJpY1B1YmxpY0luc3RhbmNlKGluc3RhbmNlPy5nZXROYXRpdmVTY3JvbGxSZWY/LigpKSB8fFxuICAgIGlzRmFicmljUHVibGljSW5zdGFuY2UoXG4gICAgICBpbnN0YW5jZT8uZ2V0U2Nyb2xsUmVzcG9uZGVyPy4oKT8uZ2V0TmF0aXZlU2Nyb2xsUmVmPy4oKSxcbiAgICApXG4gICk7XG59XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBQyxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSxPQUFBLEdBQUFDLGdCQUFBO0FBQUEsSUFBQUMsZ0JBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFRLGVBQUEsR0FBQVQsc0JBQUEsQ0FBQUMsT0FBQTtBQUViLElBQUFTLHVCQUFBLEdBQUFDLHVCQUFBLENBQUFWLE9BQUE7QUFDQSxJQUFBVywrQkFBQSxHQUFBWCxPQUFBO0FBQ0EsSUFBQVksYUFBQSxHQUFBYixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQWEsY0FBQSxHQUFBYixPQUFBO0FBQ0EsSUFBQWMscUJBQUEsR0FBQWYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFlLGNBQUEsR0FBQWhCLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBZ0IsTUFBQSxHQUFBaEIsT0FBQTtBQU9lLFNBQUFpQix5QkFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxtQkFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsQ0FBQSxXQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxLQUFBRixDQUFBO0FBQUEsU0FBQVIsd0JBQUFRLENBQUEsRUFBQUUsQ0FBQSxTQUFBQSxDQUFBLElBQUFGLENBQUEsSUFBQUEsQ0FBQSxDQUFBSSxVQUFBLFNBQUFKLENBQUEsZUFBQUEsQ0FBQSx1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